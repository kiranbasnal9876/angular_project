<div class="m-5">
    <h5>Select User</h5>
    <div class="col-12 select">
        <div class="col-4">
            <select class="form-select" #user_id aria-label="Default select example"
                (change)="check_permission(user_id.value)">
                <option selected value="0">select user</option>
                @for(item of Users; track item.id){
                <option value="{{item.id}}">{{item.name}}</option>
                }
                @empty {
                <option value="">No Records</option>
                }
            </select>
        </div>
        <div *ngIf="showDetails">
            <button class="btn btn-sm btn-primary" (click)="submit()">Save</button>
        </div>
    </div>

    <div class="mt-3" *ngIf="showDetails">
        <form [formGroup]="permission_form">
            <table class="table">
                <thead class="">
                    <tr>
                        <td>Menu</td>
                        <td>Add</td>
                        <td>Update</td>
                        <td>Delete</td>
                        <td>View</td>
                    </tr>
                </thead>
                <tbody formArrayName="permission_data">
                    <tr *ngFor="let permission of permission_data.controls; let i = index" [formGroupName]="i">
                        <td class="menu"><input type="text" formControlName="menu_name" [readOnly]="true"></td>
                        <input type="hidden" formControlName="menu_id">
                        <input type="hidden" formControlName="user_id">
                        <td><input type="checkbox" formControlName="add_records"></td>
                        <td><input type="checkbox" formControlName="update_records"></td>
                        <td><input type="checkbox" formControlName="delete_records"></td>
                        <td><input type="checkbox" formControlName="view_page"></td>
                    </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>